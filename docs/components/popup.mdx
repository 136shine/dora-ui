---
name: Popup 弹层
menu: Components
---

import { Playground } from 'docz';
import { Popup, Toggler } from 'components';
import '../style/index.less';

# Popup 弹层

底层弹层组件，Portal 组件的上层封装，参考 cube-ui（[基于 Vue.js 实现的精致移动端组件库](https://didi.github.io/cube-ui/#/zh-CN)）API。

可以理解为提供基础功能的传送门：是否有蒙层（mask）以及定位（position）。

自定义动画，以增强体验。

## 示例

### 基本用法（中间弹出）

<Playground>
  {() => {
    class App extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          visible: false
        };
        this.open=this.open.bind(this);        
        this.hide=this.hide.bind(this)
      }

      open() {
        this.setState({
          visible: true
        });
      }

      hide() {
        this.setState({
          visible: false
        });
      }

      render() {
        const { visible } = this.state;
        return (
          <div>
            <button onClick={this.open}>popup!</button>
            <Popup
              position="center"
              visible={visible}
              onClose={this.hide}
            >
              Popup
            </Popup>
          </div>
        );
      }
    }
    return <App />;

}}

</Playground>

### 与 Toggler 一起使用（从上弹出）

<Playground>
  <Toggler>
    {([toggled, onToggle]) => {
      return (
        <>
          <button onClick={() => onToggle(true)}>popup!</button>
          <Popup visible={toggled} position="top" onClose={() => onToggle(false)}>
            从上弹出
          </Popup>
        </>
      );
    }}
  </Toggler>
</Playground>

### 隐藏蒙层（从下弹出）

<Playground>
  <Toggler>
    {([toggled, onToggle]) => {
      return (
        <>
          <button onClick={() => onToggle(true)}>popup!</button>
          <Popup mask={false} visible={toggled} position="bottom">
            从下弹出 <br />
            <button onClick={() => onToggle(false)}>点我关闭</button> <br />
            从下弹出 <br />
          </Popup>
        </>
      );
    }}
  </Toggler>
</Playground>

### 自定义动画（蒙层、内容）

<Playground>
  <Toggler>
    {([toggled, onToggle]) => {
      return (
        <>
          <button onClick={() => onToggle(true)}>popup!</button>
          <Popup
            maskTransitionName="dora-zoom"
            transitionName="dora-slide-up"
            visible={toggled}
            position="left"
            onClose={() => onToggle(false)}
          >
            <div
              style={{
                width: '240px',
                textAlign: 'center',
                padding: '20px'
              }}
            >
              {new Array(100)
                .join()
                .split(',')
                .map((e, i) => (
                  <p key={i}>这里是导航{i}</p>
                ))}
            </div>
          </Popup>
        </>
      );
    }}
  </Toggler>
</Playground>

## API

```ts
type positionType = 'top' | 'right' | 'bottom' | 'left' | 'center';
type transitionType =
  | 'dora-fade'
  | 'dora-zoom'
  | 'dora-slide-up'
  | 'dora-slide-down'
  | 'dora-slide-right'
  | 'dora-slide-left';
```

| 属性                | 说明                                  | 类型            | 默认值                                                                                              |
| ------------------- | ------------------------------------- | --------------- | --------------------------------------------------------------------------------------------------- |
| visible             | 显示状态，是否可见                    | Boolean?        | false                                                                                               |
| children            | 内容，必传                            | ReactNode       | -                                                                                                   |
| position            | 弹层位置                              | positionType?   | 'center'                                                                                            |
| mask                | 是否展示蒙层                          | Boolean?        | true                                                                                                |
| maskClosable        | 点击蒙层是否隐藏(需要有 onClose 方法) | Boolean?        | true                                                                                                |
| onClose             | 点击蒙层的回调                        | Function?       | ()=>{}                                                                                              |
| node                | 挂载节点                              | HTMLElement?    | 无，不传时会在 body 尾部下 新建 div 以容纳弹层，存在多个 Popup 时可选择同一个 node 进行单例控制优化 |
| stopScrollUnderMask | 存在蒙层时是否禁止滚动穿透            | Boolean?        | true，默认禁止滚动穿透。注：复杂弹层内容时禁止滚动穿透可能存在问题                                  |
| destroyOnClose      | 隐藏时销毁内容组件                    | Boolean?        | false                                                                                               |
| transitionName      | 内容过渡动画                          | transitionType? | 映射 position 默认动画                                                                              |
| maskTransitionName  | 蒙层过渡动画                          | transitionType? | 'dora-fade'                                                                                         |
| wrapClassName       | 自定义容器类名                        | String?         | -                                                                                                   |
